import{r as k,u as y,a as S,j as l,L as N,H as D}from"./app-RD4YkSLs.js";import{c as F,B as r}from"./createLucideIcon-Bh2i4FhY.js";import{A as I}from"./app-layout-QDXit8dA.js";import{C as L,a as A,b as E,c as v,d as $,D as q}from"./delete-dialog-BRGw-QHq.js";import{F as z}from"./file-card-CPRvhf-H.js";import{I as O}from"./input-error-CwvFes-0.js";import{D as P,a as B,b as H,c as M,d as T,e as R}from"./dialog-CjggdYCN.js";import{I as b}from"./input-CAiv3s-V.js";import{L as V}from"./label-BALK6TZp.js";import{S as G}from"./square-pen-BbRAE1kE.js";import{S as J}from"./select-styled-BX3MzeYj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q=F("Eye",K);function w({model:e,route_base_name:t="",title:s=""}){const[a,i]=k.useState(!1),{data:n,setData:o,post:u,put:x,processing:h,reset:c,clearErrors:f}=y({name:e?e.name:""}),{errors:m}=S().props,d=e?t+".update":t+".store",C=g=>{g.preventDefault(),e?x(route(d,e),{preserveScroll:!0,onSuccess:()=>j(),onFinish:()=>c()}):u(route(d),{preserveScroll:!0,onSuccess:()=>j(),onFinish:()=>c()})},j=()=>{f(),c(),i(!1)},_=()=>{i(!0)};return l.jsxs(P,{open:a,onOpenChange:i,children:[l.jsx(B,{asChild:!0,children:l.jsx(r,{variant:`${e?"secondary":"default"}`,onClick:_,children:l.jsx("div",{className:"flex items-center",children:e?l.jsx("span",{children:"Editar"}):l.jsx(l.Fragment,{children:"Cadastrar"})})})}),l.jsxs(H,{children:[l.jsx(M,{children:e?"Editar "+e.name:"Criar"}),l.jsxs("form",{className:"space-y-6",onSubmit:C,children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(V,{htmlFor:"name",className:"sr-only",children:"Nome"}),l.jsx(b,{id:"name",type:"text",name:"name",value:n.name,onChange:g=>o("name",g.target.value),placeholder:"Nome"}),l.jsx(O,{message:m.name})]}),l.jsxs(T,{className:"gap-2",children:[l.jsx(R,{asChild:!0,children:l.jsx(r,{variant:"secondary",onClick:j,children:"Cancelar"})}),l.jsx(r,{variant:"default",disabled:h,asChild:!0,children:l.jsx("button",{type:"submit",children:e?"Salvar":"Criar"})})]})]})]})]})}function U(e){var s,a;const t=e.is_aux||!1;return e.has_show,e.has_edit,e.has_delete,l.jsxs(L,{className:"flex flex-col justify-between",children:[l.jsxs(A,{children:[l.jsx(E,{className:"items-center justify-center text-center mb-1",children:l.jsx("h3",{className:"line-clamp-1 font-semibold",children:e.model.label??e.model.title??e.model.name})}),l.jsxs("div",{className:"text-sm text-gray-500 justify-center text-center",children:[e.model.date&&l.jsx("p",{children:new Date(e.model.date).toLocaleDateString()}),e.model.date_of_birth&&l.jsxs("p",{children:[new Date(e.model.date_of_birth).toLocaleDateString(),e.model.date_of_death&&l.jsxs(l.Fragment,{children:["- ",new Date(e.model.date_of_death).toLocaleDateString()]})]})]}),e.model.authors&&e.model.authors.length>0?l.jsx("div",{className:"text-sm justify-center text-center",children:l.jsx("p",{children:e.model.authors.map(i=>i.name).join(", ")})}):e.model.cities&&e.model.cities.length>0?l.jsx("div",{className:"text-sm justify-center text-center",children:l.jsx("p",{children:e.model.cities.map(i=>i.name).join(", ")})}):null]}),(s=e.model.primary_image)!=null&&s.path||e.model.content?l.jsx(v,{className:"flex h-full items-end",children:(a=e.model.primary_image)!=null&&a.path?l.jsx("img",{src:`${e.model.primary_image.path}`,alt:e.model.title,className:"w-full aspect-video rounded object-cover"}):l.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[l.jsx("div",{className:"aspect-video pb-2 line-clamp-5 text-sm text-gray-500",dangerouslySetInnerHTML:{__html:e.model.content}}),e.model.file&&l.jsx(z,{file:e.model.file,className:"flex-1 h-32 w-full object-cover rounded-lg"})]})}):e.model.description?l.jsx(v,{className:"flex h-full items-end",children:l.jsx("div",{className:"flex flex-col items-center justify-center w-full",children:l.jsx("div",{className:"text-sm text-gray-500 line-clamp-5 pt-2 pb-2",children:e.model.description})})}):e.model.role&&l.jsx(v,{className:"flex h-full items-end",children:l.jsx("div",{className:"flex flex-col items-center justify-center w-full",children:l.jsx("div",{className:"text-sm text-gray-500 line-clamp-5 pt-2 pb-2",children:e.model.role.label})})}),l.jsx($,{children:l.jsxs("div",{className:"m-2 flex w-full h-10 justify-center gap-2",children:[t?l.jsx(w,{model:e.model,title:e.model.title??e.model.name,route_base_name:e.route_base_name}):l.jsxs(l.Fragment,{children:[e.has_edit&&l.jsx(N,{href:route(e.edit_route,e.model),children:l.jsx(r,{variant:"secondary",className:"h-full",children:l.jsx(G,{})})}),e.has_show&&l.jsx(N,{href:route(e.show_route,e.model),children:l.jsx(r,{variant:"secondary",className:"h-full",children:l.jsx(Q,{})})})]}),e.has_delete&&l.jsx(q,{className:"h-full",resourceId:e.model.uuid,resourceName:e.model.name??e.model.title,deleteRoute:"reviews.destroy",onSuccess:()=>window.location.reload()})]})})]},e.model.uuid)}function W(e){const{setData:t,get:s,processing:a}=y({q:""}),i=n=>{n.preventDefault(),s(route(e.route),{preserveState:!0,preserveScroll:!0})};return l.jsxs("form",{onSubmit:i,className:"flex items-center justify-between gap-4 w-full"+(e.className?` ${e.className}`:""),children:[l.jsx(b,{type:"text",placeholder:"digite sua pesquisa",className:"w-full",onChange:n=>{t("q",n.target.value)}}),l.jsx(r,{type:"submit",variant:"secondary",disabled:a,children:"Pesquisar"})]})}function X({pagination:e,className:t}){return l.jsx("div",{className:`${t}`,children:l.jsx("div",{className:"flex flex-col items-center justify-between m-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(r,{variant:"outline",size:"sm",disabled:!e.links[1].url,onClick:()=>window.location.href=e.links[1].url||"",children:"<<"}),l.jsx(r,{variant:"outline",size:"sm",disabled:!e.links[0].url,onClick:()=>window.location.href=e.links[0].url||"",children:"<"}),l.jsx(J,{className:"w-24",getOptionLabel:s=>s.label,getOptionValue:s=>s.url||"",options:e.links.filter((s,a)=>a!==0&&a!==e.links.length-1).map((s,a)=>({url:s.url||"",label:s.label,active:s.active})),value:e.links.find(s=>s.active)||{url:"",label:"PÃ¡gina atual",active:!0},onChange:s=>{window.location.href=(s==null?void 0:s.url)||""},isSearchable:!1,isClearable:!1}),l.jsx(r,{variant:"outline",size:"sm",disabled:!e.links[e.links.length-1].url,onClick:()=>window.location.href=e.links[e.links.length-1].url||"",children:">"}),l.jsx(r,{variant:"outline",size:"sm",disabled:!e.links[e.links.length-2].url,onClick:()=>window.location.href=e.links[e.links.length-2].url||"",children:">>"})]})})})}function Y(e){return l.jsxs("div",{className:"flex flex-col justify-between items-center mt-4",children:[l.jsx(W,{route:e.index_route}),l.jsx(X,{pagination:e.pagination_meta})]})}function de({title:e,route_base_name:t,index:s,is_aux:a=!1,has_show:i=!0,has_create:n=!0,has_edit:o=!0,has_delete:u=!0}){var m;const x=`${t}.index`,h=`${t}.create`,c=`${t}.edit`,f=`public.${t}.show`;return l.jsxs(I,{children:[l.jsx(D,{title:e}),l.jsx("section",{className:"px-4 py-4 text-gray-800 dark:text-gray-200",children:l.jsxs("div",{className:"mx-auto lg:px-8",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h1",{className:"text-2xl font-bold",children:e}),n&&(a?l.jsx(w,{model:null,title:e,route_base_name:t}):l.jsx(N,{href:route(h),prefetch:!0,children:l.jsx(r,{children:"Cadastrar"})}))]}),l.jsx(Y,{index_route:x,pagination_meta:s.meta}),l.jsx("div",{className:"grid gap-4 p-3 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",children:(m=s.data)==null?void 0:m.map(d=>l.jsx(U,{model:d,route_base_name:t,edit_route:c,show_route:f,is_aux:a,has_show:i,has_edit:o,has_delete:u},d.uuid))})]})})]})}export{de as A};
