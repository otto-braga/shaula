import{r as a,j as n}from"./app-RD4YkSLs.js";import{I as x}from"./input-error-CwvFes-0.js";import{F as j}from"./file-card-CPRvhf-H.js";import{B as S}from"./createLucideIcon-Bh2i4FhY.js";import{a as E}from"./lazy-loading-select-DxCqoid1.js";function w({model:o,data:v,setData:d,errors:u,processing:y}){const[t,r]=a.useState((o==null?void 0:o.data.sources)||[]),[m,c]=a.useState([]);function f(e){if(e.length<1)return;let s;return fetch(route("sources.fetch.options",{q:e}),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(i=>i.json()).then(i=>{s=i,c(s.results.filter(l=>!(t!=null&&t.map(g=>g.uuid).includes(l.uuid??""))).map(l=>({uuid:l.uuid,label:l.label+" - "+l.content})))}),s}function p(e){if(c([]),e===""||e===null)return;let s;return fetch(route("sources.fetch.single",{uuid:e}),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(i=>i.json()).then(i=>{s=i,console.log("response",s),r([...t,s])}),s}async function h(e){e&&p(e.uuid??"")}return a.useEffect(()=>{d("sources_uuids",t.map(e=>e.uuid))},[t]),n.jsxs("div",{children:[n.jsx(E,{options:m,onChange:e=>{e&&h(e)},value:null,onInputChange:f}),n.jsx(x,{className:"mt-2",message:u==null?void 0:u.sources_uuids}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t==null?void 0:t.map(e=>n.jsxs("div",{className:"mt-2 p-4 border rounded-lg flex flex-col items-center justify-between",children:[n.jsx("p",{className:"text-sm font-semibold",children:e.title}),n.jsx("p",{className:"text-sm text-gray-500 h-full overflow-hidden mb-2",dangerouslySetInnerHTML:{__html:e.content??""}}),n.jsx(j,{file:e.file??null,className:"w-full h-32 rounded"}),n.jsx(S,{type:"button",variant:"secondary",className:"mt-2 w-full",onClick:()=>{r(t.filter(s=>s.uuid!==e.uuid))},children:"Remover Fonte"})]},e.uuid+e.title))})]})}export{w as E};
