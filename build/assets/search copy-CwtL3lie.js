import{r as a,j as t}from"./app-RD4YkSLs.js";import{P as j}from"./public-layout-Cpqal_m3.js";import{t as y}from"./type-label-CO2nTTr9.js";/* empty css            */import"./createLucideIcon-Bh2i4FhY.js";import"./sheet-C8lzNEVF.js";import"./index-DnHvJ50q.js";import"./index-gSivFwI-.js";function w({q:c}){var u;const[m,p]=a.useState({data:[]}),[l,x]=a.useState(1),[r,o]=a.useState(0),[d,f]=a.useState([]),[n,b]=a.useState([]),g=()=>{const e=route("public.search.filter.fetch.options");fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{f(s.data||[]),b(s.data.map(h=>({name:h.name,value:new Array,label:h.label})))}).catch(s=>console.error("Error fetching filter data:",s))};a.useEffect(()=>{g()},[]),a.useEffect(()=>{console.log("Fetched filter options:",d)},[d]),a.useEffect(()=>{console.log("Filter state updated:",n)},[n]);const i=()=>{const e=route("public.search.fetch.search")+`?q=${encodeURIComponent(c)}&page=${r}`;fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{console.log("Search results:",s),p({data:s.results}),x(s.last_page)}).catch(s=>console.error("Error fetching search results:",s))};return a.useEffect(()=>{r==1?i():o(1)},[c]),a.useEffect(()=>{if(r<1){o(1);return}if(r>l){o(l);return}i()},[r]),a.useEffect(()=>{i()},[n]),t.jsx(j,{head:"SHAULA",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsx("div",{className:"items-top mt-4 mb-6 flex justify-center",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"mb-4 text-2xl font-bold",children:['Resultados da busca por "',c,'"']}),l>1&&t.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[t.jsx("button",{onClick:()=>o(r-1),disabled:r===1,className:`rounded border px-4 py-2 ${r===1?"cursor-not-allowed border-gray-300 text-gray-400":"border-blue-600 text-blue-600 hover:bg-blue-100"}`,children:"Anterior"}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",r," de ",l]}),t.jsx("button",{onClick:e=>o(r+1),disabled:r===l,className:`rounded border px-4 py-2 ${r===l?"cursor-not-allowed border-gray-300 text-gray-400":"border-blue-600 text-blue-600 hover:bg-blue-100"}`,children:"Próxima"})]}),t.jsx("ul",{className:"space-y-4",children:(u=m.data)==null?void 0:u.map((e,s)=>t.jsx("li",{className:"border-b pb-4",children:t.jsxs("div",{className:"mb-2 flex flex-row items-center space-x-2",children:[e.primary_image_path&&t.jsx("img",{src:e.primary_image_url||"/default-image.png",alt:e.title||e.name||"Imagem",className:"aspect-square h-32 w-32 rounded object-cover"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("p",{className:"text-gray-500",children:e.type?y(e.type):""}),t.jsx("a",{href:e.route||"#",className:"text-lg font-semibold text-blue-600 hover:underline",children:e.title||e.name||"[Sem título]"}),e.authors&&t.jsx("p",{className:"text-sm text-gray-600",children:e.authors.join(", ")}),e.content&&t.jsxs("p",{className:"mt-2 text-gray-800",children:[e.content.substring(0,150),"..."]})]})]})},s))})]})})})})}export{w as default};
