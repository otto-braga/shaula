import{u as E,a as N,r as S,j as s}from"./app-RD4YkSLs.js";import{I as o}from"./input-error-CwvFes-0.js";import{I as v}from"./input-CAiv3s-V.js";import{L as n}from"./label-BALK6TZp.js";import{E as C}from"./Editor-DH9_B-lZ.js";import{E as h}from"./edit-tabs-DwnU_rGx.js";import{L as l}from"./lazy-loading-select-DxCqoid1.js";import{E as L}from"./edit-layout-DbfRjes2.js";/* empty css            */import"./createLucideIcon-Bh2i4FhY.js";import"./index-gSivFwI-.js";import"./check-CguumAvl.js";import"./sheet-C8lzNEVF.js";import"./index-DnHvJ50q.js";import"./select-styled-BX3MzeYj.js";import"./app-layout-QDXit8dA.js";import"./index-Bdhum9Hy.js";function O({historyArticle:e}){var c,x,g,j,f;const r=!!e,{data:m,setData:u,post:p,processing:_}=E({title:e?e.data.title:"",date:e?e.data.date:"",authors_uuids:e?e.data.authors.map(a=>a.uuid):[],categories_uuids:e?(c=e.data.categories)==null?void 0:c.map(a=>a.uuid):[],periods_uuids:e?(x=e.data.periods)==null?void 0:x.map(a=>a.uuid):[],links:e?e.data.links:""}),{errors:d}=N().props,k=a=>{a.preventDefault(),console.log("data",m),r?p(route("history_articles.update",e.data),{preserveScroll:!0,preserveState:!1}):p(route("history_articles.store"),{preserveScroll:!0,preserveState:!1})},i=S.useRef(null);function b(a){var t;u("links",((t=i==null?void 0:i.current)==null?void 0:t.getContent())??"")}return s.jsx(L,{children:s.jsxs("form",{onSubmit:k,className:"space-y-3 bg-inherit",children:[s.jsx(h,{model:e,route_base_name:"history_articles",processing:_}),r,s.jsxs("div",{children:[s.jsx(n,{htmlFor:"title",children:"Título"}),s.jsx(v,{id:"title",value:m.title??"",onChange:a=>u("title",a.target.value),autoComplete:"title"}),s.jsx(o,{className:"mt-2",message:d.title})]}),s.jsxs("div",{children:[s.jsx(n,{htmlFor:"authors_uuids",children:"Autores"}),s.jsx(l,{isMulti:!0,routeName:"people.fetch.options",value:(g=e==null?void 0:e.data.authors)==null?void 0:g.map(a=>({uuid:a.uuid,label:a.name})),onChange:a=>{u("authors_uuids",a.map(t=>t.uuid))}}),s.jsx(o,{className:"mt-2",message:d.authors_uuids})]}),s.jsx("div",{className:"flex flex-row gap-3",children:s.jsxs("div",{className:"w-full",children:[s.jsx(n,{htmlFor:"date",children:"Data"}),s.jsx(v,{id:"date",type:"date",value:m.date??"",onChange:a=>u("date",a.target.value),autoComplete:"date",className:"w-full"}),s.jsx(o,{className:"mt-2",message:d.date})]})}),s.jsxs("div",{children:[s.jsx(n,{htmlFor:"categories",children:"Categorias"}),s.jsx(l,{isMulti:!0,routeName:"categories.fetch.options",value:(j=e==null?void 0:e.data.categories)==null?void 0:j.map(a=>({uuid:a.uuid,label:a.name})),onChange:a=>{u("categories_uuids",a.map(t=>t.uuid))}}),s.jsx(o,{className:"mt-2",message:d.categories_uuids})]}),s.jsxs("div",{children:[s.jsx(n,{htmlFor:"periods",children:"Periodização"}),s.jsx(l,{isMulti:!0,routeName:"periods.fetch.options",value:(f=e==null?void 0:e.data.periods)==null?void 0:f.map(a=>({uuid:a.uuid,label:a.name})),onChange:a=>{u("periods_uuids",a.map(t=>t.uuid))}}),s.jsx(o,{className:"mt-2",message:d.periods_uuids})]}),s.jsxs("div",{children:[s.jsx(n,{htmlFor:"links",children:"Links relacionados"}),s.jsx(C,{tinymceScriptSrc:"/tinymce/tinymce.min.js",licenseKey:"gpl",onInit:(a,t)=>i.current=t,initialValue:(e==null?void 0:e.data.links)||"",init:{plugins:["autolink","lists","link","autoresize"],min_height:150,autoresize_bottom_margin:0,menubar:!1,skin:document.documentElement.classList.contains("dark")?"oxide-dark":"oxide",content_css:document.documentElement.classList.contains("dark")?"dark":"default",toolbar:"link | undo redo",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px } img {max-width: 80%; display: block; margin: auto; padding: 1rem;}"},onEditorChange:b})]})]})})}export{O as default};
