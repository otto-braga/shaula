import{r as d,j as e,L as b,u as w,a as q,H as L}from"./app-RD4YkSLs.js";import{B as x}from"./createLucideIcon-Bh2i4FhY.js";import{I as v}from"./input-CAiv3s-V.js";import{t as P}from"./type-label-CO2nTTr9.js";import{S as k}from"./square-pen-BbRAE1kE.js";import{I as E}from"./input-error-CwvFes-0.js";import{D as I,a as A,b as T,c as $,d as F,e as B}from"./dialog-CjggdYCN.js";import{L as H}from"./label-BALK6TZp.js";import{A as M}from"./app-layout-QDXit8dA.js";/* empty css            */import"./sheet-C8lzNEVF.js";import"./index-DnHvJ50q.js";import"./index-gSivFwI-.js";import"./index-Bdhum9Hy.js";function O(t){var h;const[s,n]=d.useState(t.q||""),[i,f]=d.useState({data:[]}),[c,p]=d.useState(1),[l,o]=d.useState(0),m=()=>{const a=route("public.search.fetch.search")+`?q=${encodeURIComponent(s)}&page=${l}`;fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>{console.log("Search results:",r),f({data:r.results}),p(r.last_page)}).catch(r=>console.error("Error fetching search results:",r))};return d.useEffect(()=>{if(l<1){o(1);return}if(l>c){o(c);return}m()},[l]),e.jsxs("div",{className:t.className?` ${t.className}`:"",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 w-full",children:[e.jsx(v,{type:"text",placeholder:"digite sua pesquisa",className:"w-full",onChange:a=>{n(a.target.value)}}),e.jsx(x,{variant:"secondary",onClick:a=>{a.preventDefault(),o(1),m()},children:"Pesquisar"})]}),i.data.length>0&&e.jsxs("section",{className:"mt-4 space-y-8 md:col-span-4 md:pl-8",children:[e.jsx("div",{className:"space-y-4",children:(h=i.data)==null?void 0:h.map((a,r)=>e.jsxs("div",{className:"flex flex-col items-start gap-4 border-b pb-4 md:flex-row",children:[a.primary_image_path&&e.jsx("img",{src:a.primary_image_url||"/default-image.png",alt:a.title||a.name||"Imagem",className:"aspect-square object-cover md:max-w-sm"}),e.jsxs("div",{className:"flex h-full flex-col space-y-3",children:[e.jsx("p",{className:"text-gray-500",children:a.type?P(a.type):""}),e.jsxs("div",{children:[e.jsx(b,{href:a.route||"#",className:"text-2xl font-semibold hover:underline",children:a.title||a.name||"[Sem título]"}),a.authors&&e.jsx("p",{className:"text-slate-600",children:a.authors.join(", ")}),a.content&&e.jsx("div",{dangerouslySetInnerHTML:{__html:a.content},className:"mt-3 line-clamp-5 no-underline"})]})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(b,{href:route(a.route_base_name+".edit",a.slug),className:"text-blue-600 hover:underline",children:e.jsx(k,{})})})]},r))}),c>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>o(l-1),disabled:l===1,className:`rounded border px-4 py-2 ${l===1?"cursor-not-allowed border-gray-300 text-gray-400":"border-blue-600 text-blue-600 hover:bg-blue-100"}`,children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",l," de ",c]}),e.jsx("button",{onClick:a=>o(l+1),disabled:l===c,className:`rounded border px-4 py-2 ${l===c?"cursor-not-allowed border-gray-300 text-gray-400":"border-blue-600 text-blue-600 hover:bg-blue-100"}`,children:"Próxima"})]})]})]})}function N({uuid:t="",slug:s="",name:n="",route_base_name:i="",children:f,is_aux:c=!1,className:p=""}){const[l,o]=d.useState(!1),{data:m,setData:h,put:a,processing:r,reset:g,clearErrors:y}=w({name:n}),{errors:C}=q().props,_=i+".update",D=u=>{u.preventDefault(),a(route(_,t),{preserveScroll:!0,onSuccess:()=>j(),onFinish:()=>g()})},j=()=>{y(),g(),o(!1)},S=()=>{o(!0)};return e.jsx("div",{className:p,children:c?e.jsxs(I,{open:l,onOpenChange:o,children:[e.jsx(A,{asChild:!0,children:e.jsx(x,{variant:"outline",onClick:S,className:"w-full overflow-hidden justify-start",children:n})}),e.jsxs(T,{children:[e.jsx($,{children:"Editar"}),e.jsxs("form",{className:"space-y-6",onSubmit:D,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(H,{htmlFor:"name",className:"sr-only",children:"Nome"}),e.jsx(v,{id:"name",type:"text",name:"name",value:m.name,onChange:u=>h("name",u.target.value),placeholder:"Nome"}),e.jsx(E,{message:C.name})]}),e.jsxs(F,{className:"gap-2",children:[e.jsx(B,{asChild:!0,children:e.jsx(x,{variant:"secondary",onClick:j,children:"Cancelar"})}),e.jsx(x,{variant:"default",disabled:r,asChild:!0,children:e.jsx("button",{type:"submit",children:"Salvar"})})]})]})]})]}):e.jsx(x,{variant:"outline",onClick:u=>{u.preventDefault(),window.location.href=i},className:"w-full overflow-hidden justify-start",children:n})})}function se(t){return console.log("Dashboard props:",t),e.jsxs(M,{children:[e.jsx(L,{title:"Dashboard"}),e.jsx("section",{className:"px-4 py-4 text-gray-800 dark:text-gray-200",children:e.jsxs("div",{className:"mx-auto lg:px-8",children:[e.jsx("div",{className:"",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"})}),e.jsx(O,{q:t.q,className:"mt-4"}),e.jsxs("div",{className:"py-4",children:[e.jsx("h1",{className:"mb-4 text-lg font-bold",children:"Útimas Atualizações"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-full border rounded-xl p-4",children:[e.jsx("h2",{className:"text-md font-semibold",children:"Conteúdo Principal"}),t.latest.data.length>0&&t.latest.data.map((s,n)=>e.jsx(N,{slug:s.slug,name:s.label,route_base_name:s.route,is_aux:!1},s.uuid+s.label+s.route+n))]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full border rounded-xl p-4",children:[e.jsx("h2",{className:"text-md font-semibold",children:"Conteúdo Auxiliar"}),t.latest_aux.data.length>0&&t.latest_aux.data.map((s,n)=>e.jsx(N,{uuid:s.uuid,name:s.label,route_base_name:s.route,is_aux:!0},s.uuid+s.label+s.route+n))]})]})]})]})})]})}export{se as default};
