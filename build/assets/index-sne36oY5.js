import{r as c,j as t,u as g,a as j}from"./app-RD4YkSLs.js";import{I as d}from"./input-error-CwvFes-0.js";import{I as h}from"./input-CAiv3s-V.js";import{L as f}from"./label-BALK6TZp.js";import{E as b}from"./edit-tabs-DwnU_rGx.js";import{H as v}from"./html-editor-CyMmMLAz.js";import{F as E,D as N,r as S,p as F}from"./react-filepond.esm-BVei1hwj.js";import{B as y}from"./createLucideIcon-Bh2i4FhY.js";import{F as w}from"./file-card-CPRvhf-H.js";import{L as C}from"./lazy-loading-select-DxCqoid1.js";import{E as I}from"./edit-layout-DbfRjes2.js";/* empty css            */import"./index-gSivFwI-.js";import"./check-CguumAvl.js";import"./sheet-C8lzNEVF.js";import"./index-DnHvJ50q.js";import"./Editor-DH9_B-lZ.js";import"./transition-b_aaYWws.js";import"./select-styled-BX3MzeYj.js";import"./app-layout-QDXit8dA.js";import"./index-Bdhum9Hy.js";S(F);function L({stored_file:e,data:i,setData:s,errors:o,processing:p}){const[l,r]=c.useState([]);return c.useEffect(()=>{s("files",l)},[l]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(E,{files:l,onupdatefiles:n=>{r(n.map(m=>m.file))},allowMultiple:!1,labelIdle:'Arraste e solte arquivos aqui ou <span class="filepond--label-action">clique para selecionar</span>.<br />Após carregar, clique em Salvar para fazer o upload.'})}),t.jsx("div",{className:"flex flex-1 flex-row gap-2",children:e&&t.jsxs("div",{className:"flex flex-col items-center w-full",children:[t.jsx(w,{file:e,className:"w-full h-96 flex flex-col items-center justify-between"+(i.delete_file?" opacity-50":"")},(e==null?void 0:e.uuid)+"file_card"),t.jsx("div",{className:"w-full flex flex-col justify-between",children:t.jsxs(y,{type:"button",className:i.delete_file?"bg-red-600 hover:bg-red-300":"bg-gray-100 hover:bg-red-300",onClick:()=>{s("delete_file",!i.delete_file)},children:[t.jsx(N,{})," Deletar"]},(e==null?void 0:e.uuid)+"delete_button")})]},e==null?void 0:e.uuid)})]})})}function Y({source:e}){var m,u;const i=!!e,{data:s,setData:o,post:p,processing:l}=g({title:e?e.data.title:"",source_categories_uuids:e?(m=e.data.source_categories)==null?void 0:m.map(a=>a.uuid):[],files:Array(),delete_file:!1,content:e?e.data.content:""}),{errors:r}=j().props,n=a=>{a.preventDefault(),console.log("data",s),i?p(route("sources.update",e.data),{preserveScroll:!0,preserveState:!1}):p(route("sources.store"),{preserveScroll:!0,preserveState:!1})};return t.jsx(I,{children:t.jsxs("form",{onSubmit:n,className:"space-y-3 bg-inherit",children:[t.jsx(b,{model:e,route_base_name:"sources",processing:l}),i,t.jsxs("div",{children:[t.jsx(f,{htmlFor:"title",children:"Título"}),t.jsx(h,{id:"title",value:s.title??"",onChange:a=>o("title",a.target.value),autoComplete:"title"}),t.jsx(d,{className:"mt-2",message:r.title})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"source_categories_uuids",children:"Categorias"}),t.jsx(C,{isMulti:!0,routeName:"source_categories.fetch.options",value:(u=e==null?void 0:e.data.source_categories)==null?void 0:u.map(a=>({uuid:a.uuid,label:a.name})),onChange:a=>{o("source_categories_uuids",a.map(x=>x.uuid))}}),t.jsx(d,{className:"mt-2",message:r.source_categories_uuids})]}),t.jsx(L,{stored_file:e==null?void 0:e.data.file,data:s,setData:o,errors:r,processing:l}),t.jsx(v,{content:(e==null?void 0:e.data.content)??"",content_images:[],data:s,setData:o,errors:r,processing:l,submit:n,hasGallery:!1,hasMentions:!1})]})})}export{Y as default};
