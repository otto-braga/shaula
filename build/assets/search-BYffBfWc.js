import{r as a,j as s,L as y}from"./app-RD4YkSLs.js";import{P as N}from"./public-layout-Cpqal_m3.js";import{t as v}from"./type-label-CO2nTTr9.js";/* empty css            */import"./createLucideIcon-Bh2i4FhY.js";import"./sheet-C8lzNEVF.js";import"./index-DnHvJ50q.js";import"./index-gSivFwI-.js";function T({q:n}){var i;const[p,h]=a.useState({data:[]}),[l,m]=a.useState(1),[r,c]=a.useState(0),[x,f]=a.useState([]),[o,b]=a.useState([]),[E,g]=a.useState(0),j=()=>{const e=route("public.search.filter.fetch.options");fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{f(t.data||[]),b(t.data.map(u=>({name:u.name,value:new Array,label:u.label})))}).catch(t=>console.error("Error fetching filter data:",t))};a.useEffect(()=>{j()},[]),a.useEffect(()=>{},[x]),a.useEffect(()=>{console.log("Filter state updated:");let e=0;o.forEach(t=>{t.value&&t.value.length>0&&(e+=t.value.length)}),g(e)},[o]);const d=()=>{const e=route("public.search.fetch.search")+`?q=${encodeURIComponent(n)}&page=${r}`;fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{console.log("Search results:",t),h({data:t.results}),m(t.last_page)}).catch(t=>console.error("Error fetching search results:",t))};return a.useEffect(()=>{r==1?d():c(1)},[n]),a.useEffect(()=>{if(r<1){c(1);return}if(r>l){c(l);return}d()},[r]),a.useEffect(()=>{d()},[o]),a.useEffect(()=>{console.log(o)}),s.jsx(N,{head:"SHAULA",children:s.jsx("div",{className:"grid divide-x px-4 py-4 md:grid-cols-5 md:px-8",children:s.jsxs("section",{className:"space-y-8 md:col-span-4 md:pl-8",children:[s.jsxs("h1",{className:"",children:['Resultados da busca por "',n,'"']}),s.jsx("div",{className:"space-y-4",children:(i=p.data)==null?void 0:i.map((e,t)=>s.jsxs("div",{className:"flex flex-col items-start gap-4 border-b pb-4 md:flex-row",children:[e.primary_image_path&&s.jsx("img",{src:e.primary_image_url||"/default-image.png",alt:e.title||e.name||"Imagem",className:"aspect-square object-cover md:max-w-sm"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-gray-500",children:e.type?v(e.type):""}),s.jsxs("div",{children:[s.jsx(y,{href:e.route||"#",className:"text-2xl font-semibold hover:underline",children:e.title||e.name||"[Sem título]"}),e.authors&&s.jsx("p",{className:"text-slate-600",children:e.authors.join(", ")}),e.content&&s.jsx("div",{dangerouslySetInnerHTML:{__html:e.content},className:"mt-3 line-clamp-5 no-underline"})]})]})]},t))}),l>1&&s.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[s.jsx("button",{onClick:()=>c(r-1),disabled:r===1,className:`rounded border px-4 py-2 ${r===1?"cursor-not-allowed border-gray-300 text-gray-400":"border-blue-600 text-blue-600 hover:bg-blue-100"}`,children:"Anterior"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",r," de ",l]}),s.jsx("button",{onClick:e=>c(r+1),disabled:r===l,className:`rounded border px-4 py-2 ${r===l?"cursor-not-allowed border-gray-300 text-gray-400":"border-blue-600 text-blue-600 hover:bg-blue-100"}`,children:"Próxima"})]})]})})})}export{T as default};
